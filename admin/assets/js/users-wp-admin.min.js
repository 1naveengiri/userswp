function uwp_chosen(){jQuery("select.uwp_chosen_select").length>0&&(jQuery("select.uwp_chosen_select").chosen(),jQuery("select.uwp_chosen_select_nostd").chosen({allow_single_deselect:"true"}))}function uwp_show_hide(e){jQuery("#"+e).toggle()}function uwp_show_hide_radio(e,i,a){"hide"==i?jQuery(e).closest(".widefat").find("."+a).hide("fast"):jQuery(e).closest(".widefat").find("."+a).show("fast")}function validate_field(e){var i=!0;switch(jQuery(e).attr("field_type")){case"radio":case"checkbox":jQuery(e).closest(".required_field").find(":checked").length>0&&(i=!1);break;case"select":jQuery(e).find("option:selected").length>0&&""!=jQuery(e).find("option:selected").val()&&(i=!1);break;case"multiselect":jQuery(e).find("option:selected").length>0&&(i=!1);break;case"email":""!=e.value&&/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e.value)&&(i=!1);break;case"url":""!=e.value&&/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e.value)&&(i=!1);break;case"editor":""!=jQuery("#"+jQuery(e).attr("field_id")).val()&&(i=!1);break;case"datepicker":case"time":case"text":case"textarea":default:""!=e.value&&(i=!1)}return i?(""==jQuery(e).closest(".required_field").find("span.uwp_message_error").html()&&jQuery(e).closest(".required_field").find("span.uwp_message_error").html(uwp_admin_ajax.custom_field_id_required),jQuery(e).closest(".required_field").find("span.uwp_message_error").fadeIn(),!1):(jQuery(e).closest(".required_field").find("span.uwp_message_error").html(""),jQuery(e).closest(".required_field").find("span.uwp_message_error").fadeOut(),!0)}function uwp_data_type_changed(e,i){e&&i&&(jQuery("#licontainer_"+i).find(".decimal-point-wrapper").hide(),"FLOAT"==jQuery(e).val()&&jQuery("#licontainer_"+i).find(".decimal-point-wrapper").show(),"FLOAT"==jQuery(e).val()||"INT"==jQuery(e).val()?(jQuery("#licontainer_"+i).find(".uwp-price-extra-set").show(),"1"==jQuery("#licontainer_"+i).find(".uwp-price-extra-set input[name='extra[is_price]']:checked").val()&&jQuery("#licontainer_"+i).find(".uwp-price-extra").show()):(jQuery("#licontainer_"+i).find(".uwp-price-extra-set").hide(),jQuery("#licontainer_"+i).find(".uwp-price-extra").hide()))}function save_field(e){if(jQuery("#licontainer_"+e+" #htmlvar_name").length>0){var i=jQuery("#licontainer_"+e+" #htmlvar_name").val();if(""==i)return alert(uwp_admin_ajax.custom_field_not_blank_var),!1;if(""!=i)for(var a=0;a<i.length;a++)if(-1!="!`@#$%^&*()+=-[]\\';,./{}|\":<>?~ ".indexOf(i.charAt(a)))return alert(uwp_admin_ajax.custom_field_not_special_char),!1;var t=jQuery("#licontainer_"+e+" #option_values");if(1==t.length){if(""==t.val())return alert(uwp_admin_ajax.custom_field_options_not_blank_var),!1}}var r="create_field=true&field_ins_upd=submit&"+jQuery("#licontainer_"+e).find("select, textarea, input").serialize();jQuery.ajax({url:uwp_admin_ajax.url+"?action=uwp_ajax_action&manage_field_type=custom_fields",type:"POST",data:r,success:function(i){if("HTML Variable Name should be a unique name"==jQuery.trim(i))alert(uwp_admin_ajax.custom_field_unique_name);else{jQuery("#licontainer_"+e).replaceWith(jQuery.trim(i)),uwp_chosen();var a=jQuery(".field_row_main ul.core").sortable("serialize")+"&update=update&manage_field_type=custom_fields";jQuery.get(uwp_admin_ajax.url+"?action=uwp_ajax_action&create_field=true",a,function(e){}),jQuery(".field_frm").hide()}}})}function delete_field(e,i){1==confirm(uwp_admin_ajax.custom_field_delete)&&jQuery.get(uwp_admin_ajax.url+"?action=uwp_ajax_action&create_field=true&manage_field_type=custom_fields",{field_id:e,field_ins_upd:"delete",_wpnonce:i},function(i){jQuery("#licontainer_"+e).remove()})}function uwp_show_hide_register(e){jQuery("#"+e).toggle()}function delete_register_field(e,i,a){e.replace("new","");1==confirm(uwp_admin_ajax.custom_field_delete)&&(jQuery("#create_advance_search_li_"+a).show(),jQuery.get(uwp_admin_ajax.url+"?action=uwp_ajax_register_action&create_field=true",{field_id:e,field_ins_upd:"delete",_wpnonce:i},function(i){jQuery("#licontainer_"+e).remove()}),jQuery("#uwp-"+a).closest("li").show())}function save_register_field(e){if(jQuery("#licontainer_"+e+" #field_title").length>0){if(""==jQuery("#licontainer_"+e+" #field_title").val())return alert(uwp_admin_ajax.custom_field_not_blank_var),!1}var i="create_field=true&field_ins_upd=submit&"+jQuery("#licontainer_"+e).find("select, textarea, input").serialize();jQuery.ajax({url:uwp_admin_ajax.url+"?action=uwp_ajax_register_action",type:"POST",data:i,success:function(i){if("HTML Variable Name should be a unique name"==jQuery.trim(i))alert(uwp_admin_ajax.custom_field_unique_name);else{jQuery("#licontainer_"+e).replaceWith(jQuery.trim(i));var a=jQuery(".field_row_main ul.uwp_form_extras").sortable("serialize")+"&update=update";jQuery.get(uwp_admin_ajax.url+"?action=uwp_ajax_register_action&create_field=true",a,function(e){}),jQuery(".field_frm").hide()}}})}jQuery(window).load(function(){jQuery("select.uwp_chosen_select").length>0&&(jQuery("select.uwp_chosen_select").chosen(),jQuery("select.uwp_chosen_select_nostd").chosen({allow_single_deselect:"true"})),jQuery(".uwp_upload_btn").click(function(){var e=jQuery(this);frame=wp.media({title:"Select or Upload Media",button:{text:"Use Media"},multiple:!1}),frame.on("select",function(){var i=frame.state().get("selection").first().toJSON();e.parent().next().find("img").attr("src",i.url),e.parent().find(".uwp_img_url").val(i.url)}),frame.open()})}),jQuery(document).ready(function(){jQuery("#uwp-form-builder-tab, #uwp-form-builder-tab-predefined").find("ul li a").click(function(){if(jQuery(this).attr("id")){var e=jQuery(this).data("field-type"),i=jQuery(this).data("field-type-key"),a=jQuery(this).data("field-custom-type"),t=jQuery(this).closest("#uwp-form-builder-tab, #uwp-form-builder-tab-predefined").find("#form_type").val(),r="new"+jQuery(".field_row_main ul.core li:last").index(),u=jQuery(this).closest("#uwp-available-fields").find(".manage_field_type").val();"custom_fields"==u&&jQuery.get(uwp_admin_ajax.url+"?action=uwp_ajax_action&create_field=true",{field_type:e,field_type_key:i,form_type:t,field_id:r,field_ins_upd:"new",manage_field_type:u,custom_type:a},function(e){jQuery(".field_row_main ul.core").append(e),uwp_chosen(),jQuery("#licontainer_"+r).find("#sort_order").val(parseInt(jQuery("#licontainer_"+r).index())+1),uwp_show_hide("field_frm"+r),jQuery("html, body").animate({scrollTop:jQuery("#licontainer_"+r).offset().top},1e3)})}}),jQuery(".field_row_main ul.core").sortable({opacity:.8,cursor:"move",placeholder:"ui-state-highlight",cancel:"input,label,select",update:function(){var e=jQuery(this).closest("#uwp-selected-fields").find(".manage_field_type").val(),i=jQuery(this).sortable("serialize")+"&update=update&manage_field_type="+e;"custom_fields"!=e&&"sorting_options"!=e||jQuery.get(uwp_admin_ajax.url+"?action=uwp_ajax_action&create_field=true",i,function(e){})}}),jQuery(".field_row_main ul.uwp_form_extras").sortable({opacity:.8,placeholder:"ui-state-highlight",cancel:"input,label,select",cursor:"move",update:function(){var e=jQuery(this).sortable("serialize")+"&update=update";jQuery.get(uwp_admin_ajax.url+"?action=uwp_ajax_register_action&create_field=true",e,function(e){})}}),jQuery("#uwp-form-builder-tab").find("ul li a").click(function(){if(jQuery(this).attr("id")){var e=jQuery(this).attr("id").replace("uwp-",""),i=jQuery(this).data("type"),a=jQuery(this).closest("#uwp-form-builder-tab").find("#form_type").val(),t="new"+jQuery(".field_row_main ul.uwp_form_extras li:last").index(),r=jQuery(this).closest("#uwp-available-fields").find(".manage_field_type").val();if("register"==r&&(jQuery.get(uwp_admin_ajax.url+"?action=uwp_ajax_register_action&create_field=true",{htmlvar_name:e,form_type:a,field_type:i,field_id:t,field_ins_upd:"new"},function(i){console.log(t),jQuery(".field_row_main ul.uwp_form_extras").append(i),jQuery("#licontainer_"+e).find("#sort_order").val(parseInt(jQuery("#licontainer_"+e).index())+1),uwp_show_hide("field_frm"+e),jQuery("html, body").animate({scrollTop:jQuery("#licontainer_"+e).offset().top},1e3),save_register_field(e)}),"fieldset"!=e&&jQuery(this).closest("li").hide()),"search"==r){var u=jQuery(this).data("data_type");jQuery.get(uwp_admin_ajax.url+"?action=uwp_ajax_search_action&create_field=true",{htmlvar_name:e,form_type:a,field_type:i,field_data_type:u,field_id:t,field_ins_upd:"new"},function(i){console.log(t),jQuery(".field_row_main ul.uwp_form_extras").append(i),jQuery("#licontainer_"+e).find("#sort_order").val(parseInt(jQuery("#licontainer_"+e).index())+1),uwp_show_hide("field_frm"+e),jQuery("html, body").animate({scrollTop:jQuery("#licontainer_"+e).offset().top},1e3)}),"fieldset"!=e&&jQuery(this).closest("li").hide()}}})});